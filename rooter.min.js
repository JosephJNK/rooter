(function(){var a,b,c;a={listeners:[],listen:function(a){return c.hash.listeners.push(a)},trigger:function(a){var b,d,e,f;a==null&&(a=c.hash.value()),a===""&&(a="/"),f=c.hash.listeners;for(d=0,e=f.length;d<e;d++)b=f[d],b(a)},value:function(a){return a&&(window.location.hash=a),window.location.hash.replace("#","")}},b={listeners:[],listen:function(a){return c.hash.listeners.push(a)},trigger:function(a){var b,d,e,f;a==null&&(a=c.hash.value()),a===""&&(a="/"),f=c.hash.listeners;for(d=0,e=f.length;d<e;d++)b=f[d],b(a)},value:function(a){return a&&(c.hash.lastHash=a,window.location.hash=a),window.location.hash.replace("#","")},lastHash:null,check:function(){var a;a=c.hash.value(),a!==c.hash.lastHash&&(c.hash.lastHash=a,c.hash.trigger(a)),setTimeout(c.hash.check,100)}},c={init:function(){return c.hash.listen(c.test),c.hash.check?c.hash.check():c.hash.trigger()},routes:{},route:function(a,b){var d;d="^"+a+"$",d=d.replace(/([?=,\/])/g,"\\$1").replace(/:([\w\d]+)/g,"([^/]*)"),c.routes[a]={names:a.match(/:([\w\d]+)/g),pattern:RegExp(d),fn:b}},test:function(a){var b,d,e,f,g,h,i,j,k,l,m;l=c.routes;for(i in l){d=l[i];if(f=d.pattern.exec(a)){h={};if(d.names){b=f.slice(1),m=d.names;for(e=j=0,k=m.length;j<k;e=++j)g=m[e],h[g.substring(1)]=b[e]}d.fn(h)}}}},typeof window.onhashchange!="undefined"?(c.hash=a,window.onhashchange=function(){return c.hash.trigger(c.hash.value())}):(c.hash=b,setTimeout(c.hash.check,100)),window.rooter=c}).call(this);