(function(){var a,b,c;a={listeners:[],listen:function(a){return c.hash.listeners.push(a)},trigger:function(a){var b,d,e,f;a==null&&(a=c.hash.value()),a===""&&(a="/"),f=c.hash.listeners;for(d=0,e=f.length;d<e;d++)b=f[d],b(a)},value:function(a){return a&&(window.location.hash=a),window.location.hash.replace("#","")}},b={listeners:[],listen:function(a){return c.hash.listeners.push(a)},trigger:function(a){var b,d,e,f;a==null&&(a=c.hash.value()),a===""&&(a="/"),f=c.hash.listeners;for(d=0,e=f.length;d<e;d++)b=f[d],b(a)},value:function(a){return a&&(c.hash.lastHash=a,window.location.hash=a),window.location.hash.replace("#","")},lastHash:null,check:function(){var a;a=c.hash.value(),a!==c.hash.lastHash&&(c.hash.lastHash=a,c.hash.trigger(a)),setTimeout(c.hash.check,100)}},c={init:function(){return c.hash.listen(c.test),c.hash.check?c.hash.check():c.hash.trigger()},routes:{},route:function(a,b){var d;d="^"+a+"$",d=d.replace(/([?=,\/])/g,"\\$1").replace(/:([\w\d]+)/g,"([^/]*)").replace(/\*([\w\d]+)/g,"(.*?)"),c.routes[a]={pattern:RegExp(d),fn:b}},test:function(a){var b,d,e,f;f=c.routes;for(e in f)b=f[e],(d=b.pattern.exec(a))&&b.fn.apply(null,d.slice(1))}},typeof window!="undefined"&&window!==null?(typeof window.onhashchange!="undefined"?(console.log("event"),c.hash=a,window.onhashchange=function(){return c.hash.trigger(c.hash.value())}):(console.log("timer"),c.hash=b,setTimeout(c.hash.check,100)),window.rooter=c):typeof module!="undefined"&&module!==null&&(module.exports=c)}).call(this);